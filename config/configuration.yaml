# https://www.home-assistant.io/integrations/default_config/
default_config:

# https://www.home-assistant.io/integrations/homeassistant/
homeassistant:
  debug: true

# https://www.home-assistant.io/integrations/logger/
logger:
  default: info
  logs:
    custom_components.shadow_control: debug

script: !include scripts.yaml

template:
  - sensor:
      - name: test_brightness
        state: 55
      - name: test_elevation
        state: 30
      - name: test_azimuth
        state: 180
  - binary_sensor:
      - name: shadow_handling_activation_entity
        state: "on"

cover:
  - platform: template
    covers:
      test_cover:
        unique_id: "testcover1"
        friendly_name: "Test Cover 1"
        device_class: blind
        open_cover:
          service: script.test_cover_open
        close_cover:
          service: script.test_cover_close
        stop_cover:
          service: script.test_cover_stop
        set_cover_position:
          service: script.test_cover_set_position
          data:
            position: "{{ position }}"
        position_template: "{{ state_attr('input_number.test_cover_position', 'value') | int }}"
        tilt_template: "{{ state_attr('input_number.test_cover_tilt_position', 'value') | int if is_state('input_number.test_cover_tilt_position', 'unavailable') == false else None }}"

input_number:
  # General settings:
  g01_azimuth_facade:
    #[e#20 important =Azimut Fassade (°)                      #init=180    ]
    name: "G01: Azimuth facade (°)"
    min: 0
    max: 359
    step: 1
    mode: slider
    initial: 180
  g02_offset_sun_in:
    #[e#21           =Offset Sonne Eintritt (°)               #init=-90    ]
    name: "G02: Offset Sun IN (°)"
    min: -90
    max: 0
    step: 1
    mode: slider
    initial: -90
  g03_offset_sun_out:
    #[e#22           =Offset Sonne Austritt (°)               #init=90     ]
    name: "G03: Offset Sun OUT (°)"
    min: 0
    max: 90
    step: 1
    mode: slider
    initial: 90
  g04_elevation_sun_min:
    #[e#23           =Min Elevation (°)                       #init=0      ]
    name: "G04: Elevation Sun Min (°)"
    min: 0
    max: 90
    step: 1
    mode: slider
    initial: 0
  g05_elevation_sun_max:
    #[e#24           =Max Elevation (°)                       #init=90     ]
    name: "G05: Elevation Sun Max (°)"
    min: 0
    max: 90
    step: 1
    mode: slider
    initial: 90
  g06_slat_with:
    #[e#25 important =Lamellenbreite (mm)                     #init=80     ]
    name: "G06: Shutter slat width (mm)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 80
  g07_slat_distance:
    #[e#26 important =Lamellenabstand (mm)                    #init=40     ]
    name: "G07: Shutter slat distance (mm)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 40
  g08_angle_offset:
    #[e#27           =Winkel-Offset (%)                       #init=0      ]
    name: "G08: Angle offset (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 0
  g09_min_slat_angle:
    #[e#28           =Min. Lamellenwinkel (%)                 #init=0      ]
    name: "G09: Min slat angle (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 0
  g10_stepping_height:
    #[e#35           =Hoehen-Schrittweite (%)                 #init=5      ]
    name: "G10: Height stepping (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 5
  g11_stepping_angle:
    #[e#29           =Winkel-Schrittweite (%)                 #init=5      ]
    name: "G11: Angle stepping (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 5
  g13_light_bar_width:
    #[e#31           =Lichtstreifen (mm)                      #init=0      ]
    name: "G13: Light bar width (mm)"
    min: 0
    max: 2000
    step: 10
    mode: slider
    initial: 0
  g14_shutter_height:
    #[e#32           =Gesamthoehe (mm)                        #init=2000   ]
    name: "G14: Shutter height (mm)"
    min: 0
    max: 3000
    step: 10
    mode: slider
    initial: 2000
  g15_neutral_pos_height:
    #[e#33           =Hoehe Neutralposition (%)               #init=0      ]
    name: "G15: Neutral height (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 0
  g16_neutral_pos_angle:
    #[e#34           =Winkel Neutralposition (%)              #init=0      ]
    name: "G15: Neutral angle (%)"
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 0

  sun_elevation:
    name: Sun Elevation
    min: 0
    max: 90
    step: 1
    mode: slider
    initial: 45
  sun_azimuth:
    name: Sun Azimuth
    min: 0
    max: 359
    step: 1
    mode: slider
    initial: 180
  sun_brightness:
    name: Sun Brightness
    min: 0
    max: 100000
    step: 100
    mode: slider
    initial: 1000
  test_cover_position:
    name: Test Cover Position
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 50
  test_cover_tilt_position:
    name: Test Cover Tilt Position
    min: 0
    max: 100
    step: 1
    mode: slider
    initial: 50

input_select:
  g12_shutter_type:
    #[e#30           =Typ, Schwenkbereich (0/1)               #init=0      ]
    name: "G12: Shutter type"
    options:
      - "0-90"
      - "0-180"
    initial: "0-90"
  g17_movement_restriction_height:
    #[e#36           =Bwg Hoehe einschraenken (0/1/2)         #init=0      ]
    name: "G17: Move restriction height"
    options:
      - "No restriction"
      - "Only close"
      - "Only open"
    initial: "No restriction"
  g18_movement_restriction_angle:
    #[e#37           =Bwg Winkel einschraenken (0/1/2)        #init=0      ]
    name: "G18: Move restriction angle"
    options:
      - "No restriction"
      - "Only close"
      - "Only open"
    initial: "No restriction"
  g19_update_lock_output:
    #[e#38           =Update Sperrausgang (0/1/2)             #init=0      ]
    name: "G19: Update lock output"
    options:
      - 0
      - 1
      - 2
    initial: 0
